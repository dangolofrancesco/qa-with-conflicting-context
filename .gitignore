# 1. Reset your local main to match origin/main exactly
git reset --hard origin/main

# 2. Create/update .gitignore with all the things to ignore
cat > .gitignore << 'EOF'
# Virtual environments
venv/
.venv/
env/
ENV/

# Data files
data/
ambignq/
*.jsonl
*.json

# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg

# Jupyter Notebook
.ipynb_checkpoints

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# OS
.DS_Store
Thumbs.db
EOF

# 3. Remove any tracked files that should be ignored
git rm -r --cached data/ 2>/dev/null || true
git rm -r --cached ambignq/ 2>/dev/null || true
git rm -r --cached venv/ 2>/dev/null || true

# 4. Add your actual code files
git add .

# 5. Commit
git commit -m "Add .gitignore and remove large data files"

# 6. Push to main
git push origin main